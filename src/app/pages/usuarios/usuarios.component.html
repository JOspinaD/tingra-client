<p-toast></p-toast>
<div class="card flex justify-center">
  <p-dialog
    [header]="editing ? 'Editar Usuario' : 'Crear Usuario'"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '25rem' }"
  >
    <form [formGroup]="usuarioForm">
      <div class="grid">
        <div class="col-12">
          <label for="usuario">Nombre de Usuario</label>
          <input
            type="text"
            pInputText
            formControlName="nombre"
            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
          />
        </div>
      </div>
      <div class="field">
        <label for="usuario">Correo</label>
        <input
          type="email"
          pInputText
          formControlName="correo"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
      <div class="field" *ngIf="!editing">
        <label for="usuario">Contraseña</label>
        <input
          type="password"
          pInputText
          formControlName="hashContraseña"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
      <div class="field">
        <label for="usuario">Dirección</label>
        <input
          type="text"
          pInputText
          formControlName="direccion"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
      <div class="field">
        <label for="usuario">Teléfono</label>
        <input
          type="text"
          pInputText
          formControlName="telefono"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
    </form>

    <p-button
      [label]="editing ? 'Editar' : 'Crear Usuario'"
      (click)="crearUsuario()"
      [disabled]="!usuarioForm.valid"
    ></p-button>
  </p-dialog>
</div>
<div class="flex justify-content-center align-items-center m-3">
  <div class="w-11 flex flex-column">
    <div class="flex justify-content-start">
      <p-button (click)="showDialog()" label="Crear Usuario"></p-button>
    </div>
    <p-card>
      <p-table [value]="usuarios" [paginator]="true" [rows]="10">
        <ng-template #header>
          <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Teléfono</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template #body let-usuario>
          <tr>
            <td>{{ usuario.nombre }}</td>
            <td>{{ usuario.correo }}</td>
            <td>{{ usuario.telefono }}</td>
            <td class="flex gap-2">
              <p-button
                icon="pi pi-pencil"
                (click)="editarUsuario(usuario)"
              ></p-button>
              <p-button
                icon="pi pi-times"
                (click)="eliminarUsuario(usuario.id)"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>
