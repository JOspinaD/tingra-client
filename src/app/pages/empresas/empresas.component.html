<p-toast></p-toast>
<div class="flex justify-content-center align-items-center m-3">
  <div class="w-11 flex flex-column">
    <div class="flex justify-content-start">
      <p-button (click)="showDialog()" label="Nueva Empresa"></p-button>
    </div>
    <p-card>
      <p-table [value]="empresas" [paginator]="true" [rows]="10">
        <ng-template #header>
          <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Teléfono</th>
            <th>Dirección</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template #body let-empresa>
          <tr>
            <td>{{ empresa.nombre }}</td>
            <td>{{ empresa.email }}</td>
            <td>{{ empresa.telefono }}</td>
            <td>{{ empresa.direccion }}</td>
            <td class="flex gap-2">
              <p-button
                icon="pi pi-pencil"
                (click)="editarEmpresa(empresa)"
              ></p-button>
              <p-button
                icon="pi pi-trash"
                (click)="eliminarEmpresa(empresa)"
              ></p-button>
              <button
                pButton
                (click)="verDetalleEmpresa(empresa.id)"
                label="Ver Detalle"
              ></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>

<div class="flex justify-content-center">
  <p-dialog
    [header]="editing ? 'Editar Empresa' : 'Nueva Empresa'"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '50vw' }"
    [closable]="true"
  >
    <form [formGroup]="empresaForm">
      <div class="grid">
        <div class="col-12">
          <label for="usuario">Nombre de la Empresa</label>
          <input
            type="text"
            pInputText
            formControlName="nombre"
            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
          />
        </div>
      </div>
      <div class="field">
        <label for="usuario">Correo</label>
        <input
          type="email"
          pInputText
          formControlName="email"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
      <div class="field">
        <label for="usuario">Dirección</label>
        <input
          type="text"
          pInputText
          formControlName="direccion"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
      <div class="field">
        <label for="usuario">Teléfono</label>
        <input
          type="text"
          pInputText
          formControlName="telefono"
          class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
        />
      </div>
    </form>
    <p-button
      [label]="editing ? 'Editar' : 'Crear Empresa'"
      (click)="crearEmpresa()"
      [disabled]="!empresaForm.valid"
    ></p-button>
  </p-dialog>
</div>
